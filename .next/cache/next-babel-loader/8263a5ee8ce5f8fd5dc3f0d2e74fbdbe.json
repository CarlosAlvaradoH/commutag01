{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useContext } from 'react';\nimport { ethers } from 'ethers';\nimport { useTranslation } from 'lib/../i18n';\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider';\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider';\nimport { PoolCountUp } from 'lib/components/PoolCountUp';\nimport { SmallLoader } from 'lib/components/SmallLoader';\nimport { usePlayerQuery } from 'lib/hooks/usePlayerQuery';\nimport { normalizeTo18Decimals } from 'lib/utils/normalizeTo18Decimals';\nimport { testAddress } from 'lib/utils/testAddress'; // import AccountPlaceholderImg from 'assets/images/avatar-placeholder.svg'\n\nimport ChillWalletIllustration from 'assets/images/pt-illustration-chill@2x.png';\nexport const AccountSummary = () => {\n  const {\n    t\n  } = useTranslation();\n  const {\n    pools,\n    usersChainData\n  } = useContext(PoolDataContext);\n  const {\n    chainId,\n    pauseQueries,\n    usersAddress\n  } = useContext(AuthControllerContext);\n  const playerAddressError = testAddress(usersAddress);\n  const blockNumber = -1;\n  const {\n    status,\n    data: playerData,\n    error,\n    isFetching\n  } = usePlayerQuery(pauseQueries, chainId, usersAddress, blockNumber, playerAddressError);\n\n  if (error) {\n    console.error(error);\n  }\n\n  let totalTickets = null;\n  let cumulativeWinningsAllPools = ethers.utils.bigNumberify(0);\n  playerData === null || playerData === void 0 ? void 0 : playerData.forEach(playerData => {\n    const pool = pools === null || pools === void 0 ? void 0 : pools.find(pool => pool.poolAddress === playerData.prizePool.id);\n\n    if (!pool || !playerData.balance) {\n      return;\n    }\n\n    const decimals = parseInt(pool === null || pool === void 0 ? void 0 : pool.underlyingCollateralDecimals, 10);\n    const balance = Number(ethers.utils.formatUnits(playerData.balance, decimals));\n    totalTickets = totalTickets ? totalTickets + balance : balance; // Calculate winnings\n\n    const winnings = normalizeTo18Decimals(playerData.cumulativeWinnings, decimals);\n    cumulativeWinningsAllPools = cumulativeWinningsAllPools.add(winnings);\n  });\n  const daiBalances = {\n    poolBalance: usersChainData === null || usersChainData === void 0 ? void 0 : usersChainData.v2DaiPoolCommittedBalance,\n    podBalance: usersChainData === null || usersChainData === void 0 ? void 0 : usersChainData.v2DaiPodCommittedBalance,\n    podSharesBalance: usersChainData === null || usersChainData === void 0 ? void 0 : usersChainData.v2DaiPodSharesBalance\n  };\n  const usdcBalances = {\n    poolBalance: usersChainData === null || usersChainData === void 0 ? void 0 : usersChainData.v2UsdcPoolCommittedBalance,\n    podBalance: usersChainData === null || usersChainData === void 0 ? void 0 : usersChainData.v2UsdcPodCommittedBalance,\n    podSharesBalance: usersChainData === null || usersChainData === void 0 ? void 0 : usersChainData.v2UsdcPodSharesBalance\n  };\n\n  if (daiBalances.poolBalance) {\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(daiBalances === null || daiBalances === void 0 ? void 0 : daiBalances.poolBalance, 18));\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(daiBalances === null || daiBalances === void 0 ? void 0 : daiBalances.podBalance, 18));\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(usdcBalances === null || usdcBalances === void 0 ? void 0 : usdcBalances.poolBalance, 6));\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(usdcBalances === null || usdcBalances === void 0 ? void 0 : usdcBalances.podBalance, 6));\n  }\n\n  if (!totalTickets) {\n    totalTickets = 0;\n  }\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"purple-pink-gradient rounded-lg px-10 xs:px-12 sm:px-20 py-5 text-inverse my-4 sm:mt-8 sm:mb-12 mx-auto\"\n  }, __jsx(\"div\", {\n    className: \"flex justify-between items-center\"\n  }, __jsx(\"div\", {\n    className: \"leading-tight\"\n  }, __jsx(\"h6\", {\n    className: \"font-normal\"\n  }, t('assets')), __jsx(\"h1\", null, usersAddress ? __jsx(React.Fragment, null, \"$\", __jsx(PoolCountUp, {\n    fontSansRegular: true,\n    end: parseInt(totalTickets, 10),\n    decimals: null,\n    duration: 0.5\n  })) : __jsx(React.Fragment, null, __jsx(SmallLoader, null)))), __jsx(\"div\", null, __jsx(\"img\", {\n    src: ChillWalletIllustration,\n    alt: `chillin' wallet illustration`,\n    className: \"w-40 mx-auto relative mb-4\",\n    style: {\n      right: -10,\n      top: 17\n    }\n  })))));\n};","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/components/AccountSummary.jsx"],"names":["React","useContext","ethers","useTranslation","AuthControllerContext","PoolDataContext","PoolCountUp","SmallLoader","usePlayerQuery","normalizeTo18Decimals","testAddress","ChillWalletIllustration","AccountSummary","t","pools","usersChainData","chainId","pauseQueries","usersAddress","playerAddressError","blockNumber","status","data","playerData","error","isFetching","console","totalTickets","cumulativeWinningsAllPools","utils","bigNumberify","forEach","pool","find","poolAddress","prizePool","id","balance","decimals","parseInt","underlyingCollateralDecimals","Number","formatUnits","winnings","cumulativeWinnings","add","daiBalances","poolBalance","v2DaiPoolCommittedBalance","podBalance","v2DaiPodCommittedBalance","podSharesBalance","v2DaiPodSharesBalance","usdcBalances","v2UsdcPoolCommittedBalance","v2UsdcPodCommittedBalance","v2UsdcPodSharesBalance","parseFloat","right","top"],"mappings":"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","sourcesContent":["import React, { useContext } from 'react'\nimport { ethers } from 'ethers'\n\nimport { useTranslation } from 'lib/../i18n'\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider'\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider'\nimport { PoolCountUp } from 'lib/components/PoolCountUp'\nimport { SmallLoader } from 'lib/components/SmallLoader'\nimport { usePlayerQuery } from 'lib/hooks/usePlayerQuery'\nimport { normalizeTo18Decimals } from 'lib/utils/normalizeTo18Decimals'\nimport { testAddress } from 'lib/utils/testAddress'\n\n// import AccountPlaceholderImg from 'assets/images/avatar-placeholder.svg'\nimport ChillWalletIllustration from 'assets/images/pt-illustration-chill@2x.png'\n\nexport const AccountSummary = () => {\n  const { t } = useTranslation()\n\n  const { pools, usersChainData } = useContext(PoolDataContext)\n  const { chainId, pauseQueries, usersAddress } = useContext(AuthControllerContext)\n\n\n\n  const playerAddressError = testAddress(usersAddress)\n  \n  const blockNumber = -1\n  const {\n    status,\n    data: playerData,\n    error,\n    isFetching\n  } = usePlayerQuery(pauseQueries, chainId, usersAddress, blockNumber, playerAddressError)\n\n  if (error) {\n    console.error(error)\n  }\n\n\n  let totalTickets = null\n  let cumulativeWinningsAllPools = ethers.utils.bigNumberify(0)\n  playerData?.forEach(playerData => {\n    const pool = pools?.find(pool => pool.poolAddress === playerData.prizePool.id)\n\n    if (!pool || !playerData.balance) {\n      return\n    }\n\n    const decimals = parseInt(pool?.underlyingCollateralDecimals, 10)\n\n    const balance = Number(\n      ethers.utils.formatUnits(playerData.balance, decimals),\n    )\n\n    totalTickets = totalTickets ? totalTickets + balance : balance\n\n    // Calculate winnings\n    const winnings = normalizeTo18Decimals(\n      playerData.cumulativeWinnings,\n      decimals\n    )\n\n    cumulativeWinningsAllPools = cumulativeWinningsAllPools.add(\n      winnings\n    )\n  })\n\n\n  const daiBalances = {\n    poolBalance: usersChainData?.v2DaiPoolCommittedBalance,\n    podBalance: usersChainData?.v2DaiPodCommittedBalance,\n    podSharesBalance: usersChainData?.v2DaiPodSharesBalance,\n  }\n\n  const usdcBalances = {\n    poolBalance: usersChainData?.v2UsdcPoolCommittedBalance,\n    podBalance: usersChainData?.v2UsdcPodCommittedBalance,\n    podSharesBalance: usersChainData?.v2UsdcPodSharesBalance,\n  }\n\n  if (daiBalances.poolBalance) {\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(daiBalances?.poolBalance, 18))\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(daiBalances?.podBalance, 18))\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(usdcBalances?.poolBalance, 6))\n    totalTickets = totalTickets + parseFloat(ethers.utils.formatUnits(usdcBalances?.podBalance, 6))\n  }\n\n  if (!totalTickets) {\n    totalTickets = 0\n  }\n\n  return <>\n    <div\n      className='purple-pink-gradient rounded-lg px-10 xs:px-12 sm:px-20 py-5 text-inverse my-4 sm:mt-8 sm:mb-12 mx-auto'\n    >\n      <div\n        className='flex justify-between items-center'\n      >\n        <div\n          className='leading-tight'\n        >\n          <h6\n            className='font-normal'\n          >\n            {t('assets')}\n          </h6>\n          <h1>\n            {usersAddress ? <>\n              $<PoolCountUp\n                fontSansRegular\n                end={parseInt(totalTickets, 10)}\n                decimals={null}\n                duration={0.5}\n              />\n            </> : <>\n              <SmallLoader />\n            </>}\n          </h1>\n        </div>\n\n        <div>\n          <img\n            src={ChillWalletIllustration}\n            alt={`chillin' wallet illustration`}\n            className='w-40 mx-auto relative mb-4'\n            style={{\n              right: -10,\n              top: 17\n            }}\n          />\n        </div>\n\n        \n      </div>\n    </div>\n\n  </>\n}\n"]},"metadata":{},"sourceType":"module"}