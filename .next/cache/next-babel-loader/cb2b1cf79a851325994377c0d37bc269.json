{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _s = $RefreshSig$();\n\nimport { useContext } from 'react';\nimport { useQuery } from 'react-query';\nimport { CONTRACT_ADDRESSES, MAINNET_POLLING_INTERVAL, QUERY_KEYS } from 'lib/constants';\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider';\nimport { fetchExternalLootBoxData } from 'lib/utils/fetchExternalLootBoxData';\nexport function useEthereumLootBoxQuery(lootBoxAddress, tokenId) {\n  _s();\n\n  var _pool, _pool$prizeStrategy, _pool$prizeStrategy$e;\n\n  var _useContext = useContext(AuthControllerContext),\n      chainId = _useContext.chainId,\n      pauseQueries = _useContext.pauseQueries;\n\n  console.log(pool);\n  var filterAddress = CONTRACT_ADDRESSES[chainId].LootBox;\n  var erc721s = (_pool = pool) === null || _pool === void 0 ? void 0 : (_pool$prizeStrategy = _pool.prizeStrategy) === null || _pool$prizeStrategy === void 0 ? void 0 : (_pool$prizeStrategy$e = _pool$prizeStrategy.externalErc721Awards) === null || _pool$prizeStrategy$e === void 0 ? void 0 : _pool$prizeStrategy$e.find(function (erc721) {\n    return erc721.address === filterAddress;\n  });\n  console.log(filterAddress);\n  console.log(erc721s); // const { lootBoxAddress, tokenId } = useGraphLootBoxQuery(lootBoxAddress, tokenId)\n\n  var enabled = !pauseQueries && chainId && Boolean(filterAddress) && Boolean(tokenId);\n  return useQuery([QUERY_KEYS.ethereumLootBoxQuery, chainId, filterAddress, tokenId, -1], /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return fetchExternalLootBoxData(provider, filterAddress, tokenId);\n\n          case 2:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 3:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), {\n    enabled: enabled,\n    refetchInterval: MAINNET_POLLING_INTERVAL\n  });\n}\n\n_s(useEthereumLootBoxQuery, \"JKHAEGSCLogn+w2V1V2fdHRgCGk=\", false, function () {\n  return [useQuery];\n});","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/hooks/useEthereumLootBoxQuery.js"],"names":["useContext","useQuery","CONTRACT_ADDRESSES","MAINNET_POLLING_INTERVAL","QUERY_KEYS","AuthControllerContext","fetchExternalLootBoxData","useEthereumLootBoxQuery","lootBoxAddress","tokenId","chainId","pauseQueries","console","log","pool","filterAddress","LootBox","erc721s","prizeStrategy","externalErc721Awards","find","erc721","address","enabled","Boolean","ethereumLootBoxQuery","provider","refetchInterval"],"mappings":";;;;;AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,QAAT,QAAyB,aAAzB;AAEA,SACEC,kBADF,EAEEC,wBAFF,EAGEC,UAHF,QAIO,eAJP;AAKA,SAASC,qBAAT,QAAsC,+DAAtC;AACA,SAASC,wBAAT,QAAyC,oCAAzC;AAEA,OAAO,SAASC,uBAAT,CAAiCC,cAAjC,EAAiDC,OAAjD,EAA0D;AAAA;;AAAA;;AAAA,oBAC7BT,UAAU,CAACK,qBAAD,CADmB;AAAA,MACvDK,OADuD,eACvDA,OADuD;AAAA,MAC9CC,YAD8C,eAC9CA,YAD8C;;AAG/DC,EAAAA,OAAO,CAACC,GAAR,CAAYC,IAAZ;AACA,MAAMC,aAAa,GAAGb,kBAAkB,CAACQ,OAAD,CAAlB,CAA4BM,OAAlD;AACA,MAAMC,OAAO,YAAGH,IAAH,iEAAG,MAAMI,aAAT,iFAAG,oBAAqBC,oBAAxB,0DAAG,sBAA2CC,IAA3C,CAAgD,UAAAC,MAAM;AAAA,WAAIA,MAAM,CAACC,OAAP,KAAmBP,aAAvB;AAAA,GAAtD,CAAhB;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYE,aAAZ;AACAH,EAAAA,OAAO,CAACC,GAAR,CAAYI,OAAZ,EAP+D,CAS/D;;AAEA,MAAMM,OAAO,GAAG,CAACZ,YAAD,IACdD,OADc,IAEdc,OAAO,CAACT,aAAD,CAFO,IAGdS,OAAO,CAACf,OAAD,CAHT;AAKA,SAAOR,QAAQ,CACb,CAACG,UAAU,CAACqB,oBAAZ,EAAkCf,OAAlC,EAA2CK,aAA3C,EAA0DN,OAA1D,EAAmE,CAAC,CAApE,CADa,wEAEb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAkBH,wBAAwB,CAACoB,QAAD,EAAWX,aAAX,EAA0BN,OAA1B,CAA1C;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAFa,IAGb;AACEc,IAAAA,OAAO,EAAPA,OADF;AAEEI,IAAAA,eAAe,EAAExB;AAFnB,GAHa,CAAf;AAQD;;GAxBeI,uB;UAgBPN,Q","sourcesContent":["import { useContext } from 'react'\nimport { useQuery } from 'react-query'\n\nimport {\n  CONTRACT_ADDRESSES,\n  MAINNET_POLLING_INTERVAL,\n  QUERY_KEYS,\n} from 'lib/constants'\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider'\nimport { fetchExternalLootBoxData } from 'lib/utils/fetchExternalLootBoxData'\n\nexport function useEthereumLootBoxQuery(lootBoxAddress, tokenId) {\n  const { chainId, pauseQueries } = useContext(AuthControllerContext)\n\n  console.log(pool)\n  const filterAddress = CONTRACT_ADDRESSES[chainId].LootBox\n  const erc721s = pool?.prizeStrategy?.externalErc721Awards?.find(erc721 => erc721.address === filterAddress)\n  console.log(filterAddress)\n  console.log(erc721s)\n\n  // const { lootBoxAddress, tokenId } = useGraphLootBoxQuery(lootBoxAddress, tokenId)\n  \n  const enabled = !pauseQueries &&\n    chainId &&\n    Boolean(filterAddress) &&\n    Boolean(tokenId)\n\n  return useQuery(\n    [QUERY_KEYS.ethereumLootBoxQuery, chainId, filterAddress, tokenId, -1],\n    async () => await fetchExternalLootBoxData(provider, filterAddress, tokenId),\n    {\n      enabled,\n      refetchInterval: MAINNET_POLLING_INTERVAL\n    }\n  )\n}\n"]},"metadata":{},"sourceType":"module"}