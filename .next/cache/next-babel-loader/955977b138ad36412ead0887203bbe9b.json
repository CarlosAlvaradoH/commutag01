{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { useState } from 'react';\nimport classnames from 'classnames';\nimport FeatherIcon from 'feather-icons-react';\nimport { useForm } from 'react-hook-form';\nimport { axiosInstance } from 'lib/axiosInstance';\nimport { useTranslation } from 'lib/../i18n';\nimport { TextInputGroup } from 'lib/components/TextInputGroup';\nimport { poolToast } from 'lib/utils/poolToast';\nconst MAILCHIMP_LOCAL_URI = `/.netlify/functions/mailchimp-signup`;\nexport function EmailSignup(props) {\n  const {\n    t\n  } = useTranslation();\n  const {\n    handleSubmit,\n    register,\n    watch,\n    formState\n  } = useForm({\n    mode: 'all'\n  });\n  const {\n    0: success,\n    1: setSuccess\n  } = useState(success);\n  const watchEmail = watch('email');\n\n  const onSubmit = async () => {\n    if (formState.isValid) {\n      let response;\n\n      try {\n        const listId = process.env.NEXT_JS_MAILCHIMP_LIST_GENERAL_ID;\n\n        if (!listId) {\n          throw new Error('No listId supplied');\n        }\n\n        response = await axiosInstance.post(MAILCHIMP_LOCAL_URI, {\n          email: watchEmail,\n          listId\n        });\n\n        if (response.status < 400) {\n          setSuccess(true);\n        }\n      } catch (error) {\n        console.warn(error);\n        console.error(error.message);\n        poolToast.error(t('mailchimpSubscribeErrorMsg'));\n      }\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"flex flex-col items-start justify-start w-full\"\n  }, __jsx(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    className: \"w-full\"\n  }, __jsx(TextInputGroup, {\n    alignLeft: true,\n    small: true,\n    marginClasses: \"m-0\",\n    paddingClasses: \"px-8 py-2\",\n    borderClasses: \"border-0\",\n    bgClasses: \"bg-primary\",\n    id: \"email\",\n    type: \"email\",\n    name: \"email\",\n    register: register,\n    placeholder: t('yourEmailAddress'),\n    inlineButton: __jsx(React.Fragment, null, __jsx(\"button\", {\n      className: \"flex w-full items-center text-highlight-1 hover:text-darkened focus:text-darkened active:text-darkened font-bold tracking-wider bg-primary hover:bg-highlight-2 active:bg-highlight-2 focus:bg-highlight-2 py-2 px-3 rounded-full trans trans-fastest\"\n    }, success ? __jsx(FeatherIcon, {\n      strokeWidth: \"0.15rem\",\n      icon: \"check-circle\",\n      className: \"mr-2 stroke-current w-4 h-4 relative\",\n      style: {\n        top: 1\n      }\n    }) : __jsx(React.Fragment, null, __jsx(FeatherIcon, {\n      strokeWidth: \"0.15rem\",\n      icon: \"arrow-right\",\n      className: \"mr-2 stroke-current w-4 h-4 relative\",\n      style: {\n        top: 1\n      }\n    }), \" \", t('getNotified'))))\n  })), __jsx(\"div\", {\n    className: `text-highlight-1 text-xs sm:text-sm lg:text-lg mb-3 text-left`\n  }, success && t('thankYouYouWillBeNotified'))));\n}","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/components/EmailSignup.jsx"],"names":["React","useState","classnames","FeatherIcon","useForm","axiosInstance","useTranslation","TextInputGroup","poolToast","MAILCHIMP_LOCAL_URI","EmailSignup","props","t","handleSubmit","register","watch","formState","mode","success","setSuccess","watchEmail","onSubmit","isValid","response","listId","process","env","NEXT_JS_MAILCHIMP_LIST_GENERAL_ID","Error","post","email","status","error","console","warn","message","top"],"mappings":"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","sourcesContent":["import React, { useState } from 'react'\nimport classnames from 'classnames'\nimport FeatherIcon from 'feather-icons-react'\nimport { useForm } from 'react-hook-form'\n\nimport { axiosInstance } from 'lib/axiosInstance'\nimport { useTranslation } from 'lib/../i18n'\nimport { TextInputGroup } from 'lib/components/TextInputGroup'\nimport { poolToast } from 'lib/utils/poolToast'\n\nconst MAILCHIMP_LOCAL_URI = `/.netlify/functions/mailchimp-signup`\n\nexport function EmailSignup(props) {\n  const { t } = useTranslation()\n  const { handleSubmit, register, watch, formState } = useForm({ mode: 'all' })\n\n  const [success, setSuccess] = useState(success)\n  \n  const watchEmail = watch('email')\n\n  const onSubmit = async () => {\n    if (formState.isValid) {\n      let response\n\n      try {\n        const listId = process.env.NEXT_JS_MAILCHIMP_LIST_GENERAL_ID\n\n        if (!listId) {\n          throw new Error('No listId supplied')\n        }\n\n        response = await axiosInstance.post(MAILCHIMP_LOCAL_URI, {\n          email: watchEmail,\n          listId\n        })\n\n        if (response.status < 400) {\n          setSuccess(true)\n        }\n      } catch (error) {\n        console.warn(error)\n        console.error(error.message)\n        poolToast.error(t('mailchimpSubscribeErrorMsg'))\n      }\n    }\n  }\n\n  return <>\n    <div className='flex flex-col items-start justify-start w-full'>\n      <form\n        onSubmit={handleSubmit(onSubmit)}\n        className='w-full'\n      >\n        <TextInputGroup\n          alignLeft\n          small\n          marginClasses='m-0'\n          paddingClasses='px-8 py-2'\n          borderClasses='border-0'\n          bgClasses='bg-primary'\n          id='email'\n          type='email'\n          name='email'\n          register={register}\n          placeholder={t('yourEmailAddress')}\n          inlineButton={<>\n            <button\n              className='flex w-full items-center text-highlight-1 hover:text-darkened focus:text-darkened active:text-darkened font-bold tracking-wider bg-primary hover:bg-highlight-2 active:bg-highlight-2 focus:bg-highlight-2 py-2 px-3 rounded-full trans trans-fastest'\n            >\n              {success ?\n                <FeatherIcon\n                  strokeWidth='0.15rem'\n                  icon='check-circle'\n                  className='mr-2 stroke-current w-4 h-4 relative'\n                  style={{\n                    top: 1\n                  }}\n                /> : (\n                  <>\n                    <FeatherIcon\n                      strokeWidth='0.15rem'\n                      icon='arrow-right'\n                      className='mr-2 stroke-current w-4 h-4 relative'\n                      style={{\n                        top: 1\n                      }}\n                    /> {t('getNotified')}\n                  </>\n                )}\n            </button>\n          </>}\n        />\n      </form>\n\n      <div\n        className={`text-highlight-1 text-xs sm:text-sm lg:text-lg mb-3 text-left`}\n      >\n        {success && t('thankYouYouWillBeNotified')}\n      </div>\n    </div>\n  </>\n\n}\n"]},"metadata":{},"sourceType":"module"}