{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { batch, contract } from '@pooltogether/etherplex';\nimport LootBoxControllerAbi from '@pooltogether/loot-box/abis/LootBoxController';\n\nvar debug = require('debug')('pool-app:fetchExternalLootBoxData');\n\nexport var fetchExternalLootBoxData = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(provider, lootBoxControllerAddress, lootBoxAddress, tokenId) {\n    var _values$lootBoxContro, _values$lootBoxContro2, etherplexLootBoxControllerContract, values;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            etherplexLootBoxControllerContract = contract('lootBoxController', LootBoxControllerAbi, lootBoxControllerAddress);\n            console.log(lootBoxControllerAddress);\n            console.log(lootBoxAddress);\n            console.log(tokenid);\n            _context.next = 7;\n            return batch(provider, etherplexLootBoxControllerContract.computeAddress(lootBoxAddress, tokenId));\n\n          case 7:\n            values = _context.sent;\n            return _context.abrupt(\"return\", {\n              computedLootBoxAddress: values === null || values === void 0 ? void 0 : (_values$lootBoxContro = values.lootBoxController) === null || _values$lootBoxContro === void 0 ? void 0 : (_values$lootBoxContro2 = _values$lootBoxContro.computeAddress) === null || _values$lootBoxContro2 === void 0 ? void 0 : _values$lootBoxContro2[0],\n              loading: false\n            });\n\n          case 11:\n            _context.prev = 11;\n            _context.t0 = _context[\"catch\"](0);\n            console.error(_context.t0);\n            throw {\n              name: 'fetchExternalLootBoxData Error',\n              message: \"Error from Infura was: \".concat(_context.t0.message)\n            };\n\n          case 15:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 11]]);\n  }));\n\n  return function fetchExternalLootBoxData(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/utils/fetchExternalLootBoxData.js"],"names":["batch","contract","LootBoxControllerAbi","debug","require","fetchExternalLootBoxData","provider","lootBoxControllerAddress","lootBoxAddress","tokenId","etherplexLootBoxControllerContract","console","log","tokenid","computeAddress","values","computedLootBoxAddress","lootBoxController","loading","error","name","message"],"mappings":";;AAAA,SAASA,KAAT,EAAgBC,QAAhB,QAAgC,yBAAhC;AAEA,OAAOC,oBAAP,MAAiC,+CAAjC;;AAEA,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAAP,CAAiB,mCAAjB,CAAd;;AAEA,OAAO,IAAMC,wBAAwB;AAAA,sEAAG,iBACtCC,QADsC,EAEtCC,wBAFsC,EAGtCC,cAHsC,EAItCC,OAJsC;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAO9BC,YAAAA,kCAP8B,GAOOT,QAAQ,CACjD,mBADiD,EAEjDC,oBAFiD,EAGjDK,wBAHiD,CAPf;AAYpCI,YAAAA,OAAO,CAACC,GAAR,CAAYL,wBAAZ;AACAI,YAAAA,OAAO,CAACC,GAAR,CAAYJ,cAAZ;AACAG,YAAAA,OAAO,CAACC,GAAR,CAAYC,OAAZ;AAdoC;AAAA,mBAgBfb,KAAK,CACxBM,QADwB,EAExBI,kCAAkC,CAC/BI,cADH,CACkBN,cADlB,EACkCC,OADlC,CAFwB,CAhBU;;AAAA;AAgB9BM,YAAAA,MAhB8B;AAAA,6CAsB7B;AACLC,cAAAA,sBAAsB,EAAED,MAAF,aAAEA,MAAF,gDAAEA,MAAM,CAAEE,iBAAV,oFAAE,sBAA2BH,cAA7B,2DAAE,uBAA4C,CAA5C,CADnB;AAELI,cAAAA,OAAO,EAAE;AAFJ,aAtB6B;;AAAA;AAAA;AAAA;AA2BpCP,YAAAA,OAAO,CAACQ,KAAR;AA3BoC,kBA4B9B;AACJC,cAAAA,IAAI,EAAE,gCADF;AAEJC,cAAAA,OAAO,mCAA4B,YAAEA,OAA9B;AAFH,aA5B8B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAxBhB,wBAAwB;AAAA;AAAA;AAAA,GAA9B","sourcesContent":["import { batch, contract } from '@pooltogether/etherplex'\n\nimport LootBoxControllerAbi from '@pooltogether/loot-box/abis/LootBoxController'\n\nconst debug = require('debug')('pool-app:fetchExternalLootBoxData')\n\nexport const fetchExternalLootBoxData = async (\n  provider,\n  lootBoxControllerAddress,\n  lootBoxAddress,\n  tokenId,\n) => {\n  try {\n    const etherplexLootBoxControllerContract = contract(\n      'lootBoxController',\n      LootBoxControllerAbi,\n      lootBoxControllerAddress\n    )\n    console.log(lootBoxControllerAddress)\n    console.log(lootBoxAddress)\n    console.log(tokenid)\n\n    const values = await batch(\n      provider,\n      etherplexLootBoxControllerContract\n        .computeAddress(lootBoxAddress, tokenId)\n    )\n\n    return {\n      computedLootBoxAddress: values?.lootBoxController?.computeAddress?.[0],\n      loading: false\n    }\n  } catch (e) {\n    console.error(e)\n    throw {\n      name: 'fetchExternalLootBoxData Error',\n      message: `Error from Infura was: ${e.message}`\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}