{"ast":null,"code":"var __jsx = React.createElement;\nimport React, { Fragment, useContext, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useRouter } from 'next/router';\nimport { orderBy } from 'lodash';\nimport { TOKEN_IMAGES } from 'lib/constants';\nimport { useTranslation } from 'lib/../i18n';\nimport { ContributeToLootBoxDropdown } from 'lib/components/ContributeToLootBoxDropdown';\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider';\nimport { EtherscanAddressLink } from 'lib/components/EtherscanAddressLink';\nimport { PoolNumber } from 'lib/components/PoolNumber';\nimport { displayAmountInEther } from 'lib/utils/displayAmountInEther';\nimport { numberWithCommas } from 'lib/utils/numberWithCommas';\nimport GiftIcon from 'assets/images/icon-gift@2x.png';\n\nconst Erc20Image = props => {\n  const src = TOKEN_IMAGES[props.address];\n  return src ? __jsx(\"img\", {\n    src: src,\n    className: \"inline-block mr-2 w-3 h-3 xs:w-4 xs:h-4 sm:w-5 sm:h-5 rounded-full\"\n  }) : __jsx(\"div\", {\n    className: \"inline-block mr-2 bg-overlay-white w-3 h-3 xs:w-4 xs:h-4 sm:w-5 sm:h-5 rounded-full\"\n  });\n};\n\nexport const Erc20AwardsTable = props => {\n  const {\n    t\n  } = useTranslation();\n  const router = useRouter();\n  const {\n    basePath,\n    externalErc20Awards,\n    historical,\n    pool\n  } = props;\n  const {\n    0: moreVisible,\n    1: setMoreVisible\n  } = useState(false);\n\n  const handleShowMore = e => {\n    e.preventDefault();\n    setMoreVisible(true);\n    router.push(`${basePath}#awards-table`);\n  };\n\n  if (!externalErc20Awards) {\n    return null;\n  }\n\n  const balanceProperty = historical ? 'balanceAwardedBN' : 'balance';\n  let externalAwards = Object.keys(externalErc20Awards).map(key => externalErc20Awards[key]).filter(award => {\n    var _award$balancePropert;\n\n    return award === null || award === void 0 ? void 0 : (_award$balancePropert = award[balanceProperty]) === null || _award$balancePropert === void 0 ? void 0 : _award$balancePropert.gt(0);\n  });\n  const sortedAwards = orderBy(externalAwards, ({\n    value\n  }) => value || '', ['desc']);\n  const awards = moreVisible ? sortedAwards : sortedAwards === null || sortedAwards === void 0 ? void 0 : sortedAwards.slice(0, 5);\n  return __jsx(React.Fragment, null, __jsx(\"div\", {\n    id: \"awards-table\",\n    className: \"non-interactable-card mt-2 sm:mt-10 py-4 sm:py-6 px-4 xs:px-4 sm:px-10 bg-card rounded-lg card-min-height-desktop\"\n  }, __jsx(\"div\", {\n    className: \"text-caption uppercase mb-3\"\n  }, __jsx(\"img\", {\n    src: GiftIcon,\n    className: \"inline-block mr-2 card-icon\"\n  }), \" \", t('lootBox')), __jsx(\"div\", {\n    className: \"flex flex-col sm:flex-row justify-between sm:items-center\"\n  }, __jsx(\"div\", null, awards.length === 0 ? __jsx(React.Fragment, null, historical ? t('noOtherPrizesAwarded') : t('currentlyNoOtherPrizes')) : __jsx(React.Fragment, null, (pool === null || pool === void 0 ? void 0 : pool.externalAwardsUSD) && __jsx(React.Fragment, null, __jsx(\"h3\", {\n    className: \"mb-1\"\n  }, \"$\", numberWithCommas(pool === null || pool === void 0 ? void 0 : pool.externalAwardsUSD), \" \", t('value'))))), __jsx(\"div\", null, !historical && __jsx(React.Fragment, null, __jsx(ContributeToLootBoxDropdown, {\n    pool: pool\n  })))), awards.length > 0 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"xs:bg-primary theme-light--no-padding text-inverse flex flex-col justify-between rounded-lg p-0 xs:p-3 sm:px-8 mt-4\"\n  }, __jsx(\"table\", {\n    className: \"table-fixed w-full text-xxxs xs:text-xxs sm:text-sm align-top\"\n  }, __jsx(\"thead\", null, __jsx(\"tr\", {\n    style: {\n      background: 'none'\n    }\n  }, __jsx(\"th\", {\n    className: \"w-6/12\"\n  }, __jsx(\"h6\", {\n    className: \"text-green text-left\"\n  }, t('amountTokens', {\n    amount: sortedAwards.length\n  }))), __jsx(\"th\", {\n    className: \"w-4/12\"\n  }), __jsx(\"th\", {\n    className: \"w-2/12 sm:w-1/12\"\n  }))), __jsx(\"tbody\", null, awards.map(award => {\n    if (!award.name) {\n      return;\n    }\n\n    return __jsx(Fragment, {\n      key: award.address\n    }, __jsx(\"tr\", null, __jsx(\"td\", {\n      className: \"flex items-center py-2 text-left font-bold\"\n    }, __jsx(Erc20Image, {\n      address: award.address\n    }), \" \", __jsx(EtherscanAddressLink, {\n      address: award.address,\n      className: \"text-inverse\"\n    }, award.name.length > 20 ? __jsx(\"span\", {\n      className: \"truncate\"\n    }, award.name.substr(0, 20)) : award.name)), __jsx(\"td\", {\n      className: \"px-2 sm:px-3 py-2 text-left text-accent-1 truncate\"\n    }, __jsx(PoolNumber, null, displayAmountInEther(award[balanceProperty], {\n      precision: 6,\n      decimals: award.decimals\n    })), \" \", award.symbol.length > 20 ? __jsx(\"span\", {\n      className: \"truncate\"\n    }, award.symbol.substr(0, 20)) : award.symbol), __jsx(\"td\", {\n      className: \"py-2 font-bold\"\n    }, award.value ? `$${numberWithCommas(award.value, {\n      precision: 2\n    })}` : '')));\n  }))), externalAwards.length > 5 && __jsx(React.Fragment, null, __jsx(\"div\", {\n    className: \"text-center\"\n  }, __jsx(motion.button, {\n    border: \"none\",\n    onClick: handleShowMore,\n    className: \"mt-6 mb-3 underline font-bold text-xxs xs:text-base sm:text-lg text-center\",\n    animate: moreVisible ? 'exit' : 'enter',\n    initial: \"enter\",\n    variants: {\n      enter: {\n        opacity: 1,\n        y: 0\n      },\n      exit: {\n        y: -10,\n        opacity: 0\n      }\n    }\n  }, t('showMore'))))))));\n};","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/components/Erc20AwardsTable.jsx"],"names":["React","Fragment","useContext","useState","motion","useRouter","orderBy","TOKEN_IMAGES","useTranslation","ContributeToLootBoxDropdown","PoolDataContext","EtherscanAddressLink","PoolNumber","displayAmountInEther","numberWithCommas","GiftIcon","Erc20Image","props","src","address","Erc20AwardsTable","t","router","basePath","externalErc20Awards","historical","pool","moreVisible","setMoreVisible","handleShowMore","e","preventDefault","push","balanceProperty","externalAwards","Object","keys","map","key","filter","award","gt","sortedAwards","value","awards","slice","length","externalAwardsUSD","background","amount","name","substr","precision","decimals","symbol","enter","opacity","y","exit"],"mappings":"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","sourcesContent":["import React, { Fragment, useContext, useState } from 'react'\nimport { motion } from 'framer-motion'\nimport { useRouter } from 'next/router'\nimport { orderBy } from 'lodash'\n\nimport { TOKEN_IMAGES } from 'lib/constants'\nimport { useTranslation } from 'lib/../i18n'\nimport { ContributeToLootBoxDropdown } from 'lib/components/ContributeToLootBoxDropdown'\nimport { PoolDataContext } from 'lib/components/contextProviders/PoolDataContextProvider'\nimport { EtherscanAddressLink } from 'lib/components/EtherscanAddressLink'\nimport { PoolNumber } from 'lib/components/PoolNumber'\nimport { displayAmountInEther } from 'lib/utils/displayAmountInEther'\nimport { numberWithCommas } from 'lib/utils/numberWithCommas'\n\nimport GiftIcon from 'assets/images/icon-gift@2x.png'\n\nconst Erc20Image = (props) => {\n  const src = TOKEN_IMAGES[props.address]\n\n  return src ? <img\n    src={src}\n    className='inline-block mr-2 w-3 h-3 xs:w-4 xs:h-4 sm:w-5 sm:h-5 rounded-full'\n  /> : <div\n    className='inline-block mr-2 bg-overlay-white w-3 h-3 xs:w-4 xs:h-4 sm:w-5 sm:h-5 rounded-full'\n  />\n}\n\nexport const Erc20AwardsTable = (props) => {\n  const { t } = useTranslation()\n  const router = useRouter()\n\n  const { basePath, externalErc20Awards, historical, pool } = props\n\n  const [moreVisible, setMoreVisible] = useState(false)\n  \n  const handleShowMore = (e) => {\n    e.preventDefault()\n\n    setMoreVisible(true)\n\n    router.push(\n      `${basePath}#awards-table`,\n    )\n  }\n\n\n\n  if (!externalErc20Awards) {\n    return null\n  }\n\n  const balanceProperty = historical ? 'balanceAwardedBN' : 'balance'\n\n  let externalAwards = Object.keys(externalErc20Awards)\n    .map(key => externalErc20Awards[key])\n    .filter(award => award?.[balanceProperty]?.gt(0))\n\n  const sortedAwards = orderBy(externalAwards, ({ value }) => value || '', ['desc'])\n  const awards = moreVisible ? sortedAwards : sortedAwards?.slice(0, 5)\n\n  return <>\n    <div\n      id='awards-table'\n      className='non-interactable-card mt-2 sm:mt-10 py-4 sm:py-6 px-4 xs:px-4 sm:px-10 bg-card rounded-lg card-min-height-desktop'\n    >\n      <div\n        className='text-caption uppercase mb-3'\n      >\n        <img\n          src={GiftIcon}\n          className='inline-block mr-2 card-icon'\n        /> {t('lootBox')}\n      </div>\n\n      <div className='flex flex-col sm:flex-row justify-between sm:items-center'>\n        <div>\n          {awards.length === 0 ? <>\n            {historical ? t('noOtherPrizesAwarded') : t('currentlyNoOtherPrizes')}\n          </> : <>\n            {pool?.externalAwardsUSD && <>\n              <h3\n                className='mb-1'\n              >\n                ${numberWithCommas(pool?.externalAwardsUSD)} {t('value')}\n              </h3>\n            </>} \n          </>}\n        </div>\n\n        <div>\n          {!historical && <>\n            <ContributeToLootBoxDropdown\n              pool={pool}\n            />\n          </>}\n        </div>\n      </div> \n      \n      {awards.length > 0 && <>\n        <div\n          className='xs:bg-primary theme-light--no-padding text-inverse flex flex-col justify-between rounded-lg p-0 xs:p-3 sm:px-8 mt-4'\n        >\n          <table\n            className='table-fixed w-full text-xxxs xs:text-xxs sm:text-sm align-top'\n          >\n            <thead>\n              <tr\n                style={{ background: 'none' }}\n              >\n                <th\n                  className='w-6/12'\n                >\n                  <h6\n                    className='text-green text-left'\n                  >\n                    {t('amountTokens', {\n                      amount: sortedAwards.length\n                    })}\n                  </h6>\n                </th>\n                <th\n                  className='w-4/12'\n                ></th>\n                <th\n                  className='w-2/12 sm:w-1/12'\n                ></th>\n              </tr>\n            </thead>\n            <tbody>\n              {awards.map(award => {\n                if (!award.name) {\n                  return\n                }\n\n                return <Fragment\n                  key={award.address}\n                >\n                  <tr>\n                    <td\n                      className='flex items-center py-2 text-left font-bold'\n                    >\n                      <Erc20Image\n                        address={award.address}\n                      /> <EtherscanAddressLink\n                        address={award.address}\n                        className='text-inverse'\n                      >\n                        {award.name.length > 20 ? <span className='truncate'>{award.name.substr(0, 20)}</span> : award.name}\n                      </EtherscanAddressLink>\n                    </td>\n                    <td\n                      className='px-2 sm:px-3 py-2 text-left text-accent-1 truncate'\n                    >\n                      <PoolNumber>\n                        {displayAmountInEther(\n                          award[balanceProperty], {\n                            precision: 6,\n                            decimals: award.decimals\n                          }\n                        )}\n                      </PoolNumber> {award.symbol.length > 20 ? <span className='truncate'>{award.symbol.substr(0, 20)}</span> : award.symbol}\n                    </td>\n                    <td\n                      className='py-2 font-bold'\n                    >\n                      {award.value ? `$${numberWithCommas(award.value, { precision: 2 })}` : ''}\n                    </td>\n                  </tr>\n                </Fragment>\n              })}\n            </tbody>\n          </table>\n\n          {externalAwards.length > 5 && <>\n            <div className='text-center'>\n              <motion.button\n                border='none'\n                onClick={handleShowMore}\n                className='mt-6 mb-3 underline font-bold text-xxs xs:text-base sm:text-lg text-center'\n                animate={moreVisible ? 'exit' : 'enter'}\n                initial='enter'\n                variants={{\n                  enter: {\n                    opacity: 1,\n                    y: 0,\n                  },\n                  exit: {\n                    y: -10,\n                    opacity: 0,\n                  }\n                }}\n              >\n                {t('showMore')}\n              </motion.button>\n            </div>\n          </>}\n        </div>\n\n\n      </>}\n\n    </div>\n  </>\n}\n"]},"metadata":{},"sourceType":"module"}