{"ast":null,"code":"import { useContext } from 'react';\nimport { useQuery } from 'react-query';\nimport { ethers } from 'ethers';\nimport { CONTRACT_ADDRESSES, MAINNET_POLLING_INTERVAL, QUERY_KEYS } from 'lib/constants';\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider';\nimport { getCurrentLootBox } from 'lib/services/getCurrentLootBox';\nimport { fetchExternalLootBoxData } from 'lib/utils/fetchExternalLootBoxData';\nexport function useEthereumLootBoxQuery(pool) {\n  var _CONTRACT_ADDRESSES$c;\n\n  const {\n    chainId,\n    pauseQueries,\n    provider\n  } = useContext(AuthControllerContext);\n  const lootBoxControllerAddress = (_CONTRACT_ADDRESSES$c = CONTRACT_ADDRESSES[chainId]) === null || _CONTRACT_ADDRESSES$c === void 0 ? void 0 : _CONTRACT_ADDRESSES$c.LootBoxController;\n  let {\n    lootBoxAddress,\n    tokenId\n  } = getCurrentLootBox(pool, chainId);\n  tokenId = ethers.utils.bigNumberify(tokenId);\n  const enabled = !pauseQueries && chainId && Boolean(lootBoxControllerAddress) && Boolean(tokenId);\n  return useQuery([QUERY_KEYS.ethereumLootBoxQuery, chainId, lootBoxControllerAddress, lootBoxAddress, tokenId.toString(), -1], async () => await fetchExternalLootBoxData(provider, lootBoxControllerAddress, lootBoxAddress, tokenId), {\n    enabled,\n    refetchInterval: MAINNET_POLLING_INTERVAL\n  });\n}","map":{"version":3,"sources":["/Users/chuckbergeron/Git/crypto/pool-together/pool-app/lib/hooks/useEthereumLootBoxQuery.js"],"names":["useContext","useQuery","ethers","CONTRACT_ADDRESSES","MAINNET_POLLING_INTERVAL","QUERY_KEYS","AuthControllerContext","getCurrentLootBox","fetchExternalLootBoxData","useEthereumLootBoxQuery","pool","chainId","pauseQueries","provider","lootBoxControllerAddress","LootBoxController","lootBoxAddress","tokenId","utils","bigNumberify","enabled","Boolean","ethereumLootBoxQuery","toString","refetchInterval"],"mappings":"AAAA,SAASA,UAAT,QAA2B,OAA3B;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,MAAT,QAAuB,QAAvB;AAEA,SACEC,kBADF,EAEEC,wBAFF,EAGEC,UAHF,QAIO,eAJP;AAKA,SAASC,qBAAT,QAAsC,+DAAtC;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,SAASC,wBAAT,QAAyC,oCAAzC;AAEA,OAAO,SAASC,uBAAT,CAAiCC,IAAjC,EAAuC;AAAA;;AAC5C,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA,YAAX;AAAyBC,IAAAA;AAAzB,MAAsCb,UAAU,CAACM,qBAAD,CAAtD;AAEA,QAAMQ,wBAAwB,4BAAGX,kBAAkB,CAACQ,OAAD,CAArB,0DAAG,sBAA6BI,iBAA9D;AAEA,MAAI;AAAEC,IAAAA,cAAF;AAAkBC,IAAAA;AAAlB,MAA8BV,iBAAiB,CAACG,IAAD,EAAOC,OAAP,CAAnD;AAEAM,EAAAA,OAAO,GAAGf,MAAM,CAACgB,KAAP,CAAaC,YAAb,CAA0BF,OAA1B,CAAV;AAEA,QAAMG,OAAO,GAAG,CAACR,YAAD,IACdD,OADc,IAEdU,OAAO,CAACP,wBAAD,CAFO,IAGdO,OAAO,CAACJ,OAAD,CAHT;AAKA,SAAOhB,QAAQ,CACb,CAACI,UAAU,CAACiB,oBAAZ,EAAkCX,OAAlC,EAA2CG,wBAA3C,EAAqEE,cAArE,EAAqFC,OAAO,CAACM,QAAR,EAArF,EAAyG,CAAC,CAA1G,CADa,EAEb,YAAY,MAAMf,wBAAwB,CAACK,QAAD,EAAWC,wBAAX,EAAqCE,cAArC,EAAqDC,OAArD,CAF7B,EAGb;AACEG,IAAAA,OADF;AAEEI,IAAAA,eAAe,EAAEpB;AAFnB,GAHa,CAAf;AAQD","sourcesContent":["import { useContext } from 'react'\nimport { useQuery } from 'react-query'\nimport { ethers } from 'ethers'\n\nimport {\n  CONTRACT_ADDRESSES,\n  MAINNET_POLLING_INTERVAL,\n  QUERY_KEYS,\n} from 'lib/constants'\nimport { AuthControllerContext } from 'lib/components/contextProviders/AuthControllerContextProvider'\nimport { getCurrentLootBox } from 'lib/services/getCurrentLootBox'\nimport { fetchExternalLootBoxData } from 'lib/utils/fetchExternalLootBoxData'\n\nexport function useEthereumLootBoxQuery(pool) {\n  const { chainId, pauseQueries, provider } = useContext(AuthControllerContext)\n\n  const lootBoxControllerAddress = CONTRACT_ADDRESSES[chainId]?.LootBoxController\n\n  let { lootBoxAddress, tokenId } = getCurrentLootBox(pool, chainId)\n\n  tokenId = ethers.utils.bigNumberify(tokenId)\n\n  const enabled = !pauseQueries &&\n    chainId &&\n    Boolean(lootBoxControllerAddress) &&\n    Boolean(tokenId)\n\n  return useQuery(\n    [QUERY_KEYS.ethereumLootBoxQuery, chainId, lootBoxControllerAddress, lootBoxAddress, tokenId.toString(), -1],\n    async () => await fetchExternalLootBoxData(provider, lootBoxControllerAddress, lootBoxAddress, tokenId),\n    {\n      enabled,\n      refetchInterval: MAINNET_POLLING_INTERVAL\n    }\n  )\n}\n"]},"metadata":{},"sourceType":"module"}